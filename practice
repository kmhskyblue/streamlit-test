import streamlit as st
import openai

st.set_page_config(page_title="GPT-4.1 Mini Chat", layout="centered")

st.title("ğŸ§  GPT-4.1 Mini ì§ˆë¬¸ ì‘ë‹µê¸°")

# API Key ì…ë ¥ ë°›ê¸° (ë¹„ë°€ë²ˆí˜¸ íƒ€ì…ìœ¼ë¡œ)
api_key = st.text_input("ğŸ”‘ OpenAI API Keyë¥¼ ì…ë ¥í•˜ì„¸ìš”:", type="password")

# ì§ˆë¬¸ ì…ë ¥
question = st.text_area("â“ ì§ˆë¬¸ì„ ì…ë ¥í•˜ì„¸ìš”:")

# ë²„íŠ¼ í´ë¦­ ì‹œ ì‹¤í–‰
if st.button("ğŸ’¬ GPTì—ê²Œ ë¬¼ì–´ë³´ê¸°"):
    if not api_key:
        st.warning("âš ï¸ API í‚¤ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.")
    elif not question.strip():
        st.warning("âš ï¸ ì§ˆë¬¸ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.")
    else:
        try:
            # OpenAI API ì„¤ì •
            openai.api_key = api_key

            # GPT-4.1 Mini ëª¨ë¸ë¡œ ìš”ì²­
            with st.spinner("GPTê°€ ìƒê° ì¤‘ì…ë‹ˆë‹¤..."):
                response = openai.ChatCompletion.create(
                    model="gpt-4-1106-preview",  # gpt-4.1-minië¡œ ëŒ€ì²´í•  ê²½ìš° ì‹¤ì œ ëª¨ë¸ëª… í™•ì¸ í•„ìš”
                    messages=[
                        {"role": "user", "content": question}
                    ],
                    temperature=0.7,
                )

                answer = response.choices[0].message["content"]
                st.success("âœ… ì‘ë‹µ ì™„ë£Œ")
                st.markdown(f"**ğŸ’¡ GPT ì‘ë‹µ:**\n\n{answer}")

        except Exception as e:
            st.error(f"âŒ ì˜¤ë¥˜ ë°œìƒ: {e}")
